<!DOCTYPE html>
<html lang="en">
<head>
<title>simple JS Logo</title>
</head>
<body>
<h1>simple Javascript Logo</h1>
just the simple turtle commands on a Javascript environment
<!-- <canvas width="600" height="400" /> -->
<textarea id="logo_code"></textarea><button id="process">process</button>
</body>
<script src="https://code.jquery.com/jquery-1.11.3.min.js"></script>
<script src="turtle.js"></script>
<!-- script src="sjslogo.js"></script -->
<script>
  (function on_load($) {
	// sandbox for functional (saferEval)
	// create our own local versions of window and document with limited functionality
	var run_sjslogo = function (env, code) {
		// Shadow some sensitive global objects
		var locals = {
			window: {},
			document: {}
		};
		// and mix in the environment
		locals = $.extend({}, locals, env);

		var createSandbox = function (env, code, locals) {
			var params = []; // the names of local variables
			var args = []; // the local variables

			for (var param in locals) {
				if (locals.hasOwnProperty(param)) {
					args.push(locals[param]);
					params.push(param);
				}
			}

			var context = Array.prototype.concat.call(env, params, code); // create the parameter list for the sandbox
			var sandbox = new (Function.prototype.bind.apply(Function, context))(); // create the sandbox function
			context = Array.prototype.concat.call(env, args); // create the argument list for the sandbox

			return Function.prototype.bind.apply(sandbox, context); // bind the local variables to the sandbox
		};

		// result is the 'this' object for the code
		//var result = {};
		var sandbox = createSandbox(env, code, locals); // create a sandbox

		sandbox(); // call the user code in the sandbox
		return env;
	};

   $('#process').on('click', function() {
     var code = $('#logo_code').val();
     run_sjslogo({}, code);
   });
  })(jQuery);
</script>
</html>
